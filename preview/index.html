<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Jobs & Events UI – Local Preview</title>

    <!--
    Preview Page
    ------------
    This file is used for LOCAL DEVELOPMENT ONLY.

    It serves as:
    - A quick sanity check after cloning the repo
    - A test harness for incremental UI changes
    - A live example of reusing the same UI with different data

    This page intentionally mirrors SharePoint CEWP behavior:
    - Script-tag loading
    - Global initializers
    - No module loaders
  -->

    <!-- DataTables default styling -->
    <link rel="stylesheet" href="../vendor/jquery.dataTables.min.css" />

    <style>
        body {
            font-family: sans-serif;
            margin: 1.5rem;
        }

        nav {
            margin-bottom: 1rem;
        }

        nav button {
            margin-right: 0.5rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
        }

        section {
            margin-top: 1rem;
        }

        table {
            width: 100% !important;
        }
    </style>
</head>

<body>

    <h1>Jobs & Events UI – Preview</h1>

    <p>
        Use the buttons below to switch between data sets.
        Both views reuse the same UI components.
    </p>

    <nav>
        <button data-view="jobs">Jobs</button>
        <button data-view="events">Events</button>
    </nav>

    <!-- Jobs View -->
    <section id="jobs-view">
        <h2>Jobs</h2>
        <div id="jobs-table-status" aria-live="polite" class="visually-hidden">
        </div>
        <table id="jobs-table">
            <thead>
                <tr>
                    <th scope="col">Notice #</th>
                    <th scope="col">Date</th>
                    <th scope="col">Command and Location</th>
                    <th scope="col">Grade</th>
                    <th scope="col">Position</th>
                </tr>
            </thead>
        </table>
        <div id="job-details"></div>
    </section>

    <!-- Events View -->
    <section id="events-view" hidden>
        <h2>Events</h2>
        <div id="events-table-status" aria-live="polite" class="visually-hidden">
        </div>
        <table id="events-table">
            <thead>
                <tr>
                    <th scope="col">Event</th>
                    <th scope="col">Date</th>
                    <th scope="col">Location</th>
                </tr>
            </thead>
        </table>
        <div id="event-details"></div>
    </section>

    <!-- Polyfills (IE11-safe) -->
    <script src="../polyfills/minified.js"></script>

    <!-- Vendor libraries -->
    <script src="../vendor/jquery.min.js"></script>
    <script src="../vendor/jquery.dataTables.min.js"></script>

    <!-- Application bundle -->
    <script src="../dist/apps.bundle.js"></script>

    <script>
        /**
         * Simple view toggling.
         * This is intentionally minimal and framework-free.
         */
        document.querySelectorAll('nav button').forEach(button => {
            button.addEventListener('click', function () {
                const view = this.getAttribute('data-view');

                document.getElementById('jobs-view').hidden = view !== 'jobs';
                document.getElementById('events-view').hidden = view !== 'events';
            });
        });

        /**
         * Initialize both apps.
         * Each app targets its own container and data source.
         */
        if (window.JobsApp && window.EventsApp) {
            window.JobsApp.init({
                dataUrl: '/mock-data/jobsData.json',
                statusSelector: '#jobs-table-status',
                tableSelector: '#jobs-table',
                detailsSelector: '#job-details'
            });
            window.EventsApp.init({
                dataUrl: '/mock-data/eventsData.json',
                statusSelector: '#events-table-status',
                tableSelector: '#events-table',
                detailsSelector: '#event-details'
            });
        } else {
            console.error(
                'Apps not found. Ensure apps.bundle.min.js is built and loaded.'
            );
        }
    </script>

</body>

</html>